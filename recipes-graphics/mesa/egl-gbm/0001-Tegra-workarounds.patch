From fda73f5a131b951b1d43a19eb35fd549dffba9a2 Mon Sep 17 00:00:00 2001
From: Matt Madison <matt@madison.systems>
Date: Thu, 10 Feb 2022 11:52:55 -0800
Subject: [PATCH] Tegra workarounds

---
 src/gbm-display.c | 2 +-
 src/gbm-surface.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/gbm-display.c b/src/gbm-display.c
index 93bceb4..31f44b4 100644
--- a/src/gbm-display.c
+++ b/src/gbm-display.c
@@ -262,7 +262,7 @@ eGbmInitializeHook(EGLDisplay dpy, EGLint* major, EGLint* minor)
         !eGbmFindExtension("EGL_KHR_stream", exts) ||
         !eGbmFindExtension("EGL_KHR_stream_producer_eglsurface", exts) ||
         !eGbmFindExtension("EGL_KHR_image_base", exts) ||
-        !eGbmFindExtension("EGL_NV_stream_consumer_eglimage", exts) ||
+//        !eGbmFindExtension("EGL_NV_stream_consumer_eglimage", exts) ||
         !eGbmFindExtension("EGL_MESA_image_dma_buf_export", exts) ||
         !eGbmFindExtension("EGL_EXT_sync_reuse", exts)) {
         data->egl.Terminate(display->devDpy);
diff --git a/src/gbm-surface.c b/src/gbm-surface.c
index df7d481..2ba0701 100644
--- a/src/gbm-surface.c
+++ b/src/gbm-surface.c
@@ -225,7 +225,7 @@ PumpSurfEvents(GbmDisplay* display, GbmSurface* surf)
             break;
 
         default:
-            assert(!"Unhandled EGLImage stream consumer event");
+            //assert(!"Unhandled EGLImage stream consumer event");
 
         }
     }
-- 
2.32.0

